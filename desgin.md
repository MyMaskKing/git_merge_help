# Git Merge 管理工具设计文档

## 项目概述
本项目是管理git的merge所研发的，主要功能是用户输入当前branch，merge的branch，对merge操作结果可视化展示，如果有差异的问题，可以让用户在线解决差异，然后push。

## 发布平台限制
- github和cloudflare的pages

## 1. 系统架构设计

### 1.1 技术栈选择
- 前端：Next.js（适合部署在GitHub Pages和Cloudflare Pages）
- UI框架：TailwindCSS + shadcn/ui（现代化UI组件）
- Git操作：isomorphic-git（浏览器端Git操作库）
- 差异展示：Monaco Editor（VS Code的编辑器核心，适合展示代码差异）

### 1.2 核心功能模块

#### A. 分支管理模块
- 获取当前仓库所有分支列表
- 分支切换功能
- 分支状态显示（ahead/behind commits）

#### B. Merge操作模块
- 分支选择界面（源分支和目标分支）
- Merge预检查（检测是否有冲突）
- Merge执行操作
- Merge结果可视化

#### C. 冲突解决模块
- 冲突文件列表展示
- 三向对比视图（BASE，OURS，THEIRS）
- 在线编辑器（解决冲突）
- 冲突解决状态追踪

#### D. 提交管理模块
- 修改内容预览
- Commit message编辑
- Push操作执行

## 2. 用户界面设计

### 需要使用响应式布局，保证多端的UI显示正常

### 2.1 主界面布局
```
+------------------------+
|        Header         |
|  (仓库信息 & 导航)     |
+------------------------+
|                       |
|    分支选择区域        |
|                       |
+------------------------+
|                       |
|    操作结果展示        |
|    (diff/conflict)    |
|                       |
+------------------------+
|      操作按钮区        |
+------------------------+
```

### 2.2 交互流程
1. 用户登录/授权（GitHub OAuth）
2. 选择仓库和分支
3. 执行Merge操作
4. 如有冲突，进入解决界面
5. 确认更改并提交

## 3. 安全性考虑
- 使用GitHub OAuth进行身份验证
- 所有Git操作在客户端执行，避免服务器端存储敏感信息
- 使用HTTPS进行所有API通信

## 4. 部署方案
- 静态网站部署在GitHub Pages或Cloudflare Pages
- 利用GitHub API进行权限验证和仓库操作
- 使用浏览器端Git操作，无需后端服务器

## 5. 项目限制和解决方案
1. 限制：GitHub Pages和Cloudflare Pages只支持静态网站
   解决：使用纯前端实现，利用浏览器API和GitHub API

2. 限制：大型仓库的性能问题
   解决：实现增量加载和虚拟滚动

3. 限制：复杂冲突的处理
   解决：提供清晰的可视化界面和分步指导

## 6. 开发计划
### 第一阶段：基础架构搭建
- 项目初始化（Next.js + TailwindCSS）
- 基础UI组件开发
- GitHub OAuth集成

### 第二阶段：核心功能开发
- 分支管理模块实现
- Merge操作基础功能
- 差异展示功能

### 第三阶段：高级功能实现
- 冲突解决界面
- 在线编辑器集成
- 提交管理功能

### 第四阶段：优化和测试
- 性能优化
- 用户体验改进
- 兼容性测试
- 部署和文档完善